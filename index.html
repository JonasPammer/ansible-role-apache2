<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Jonas Pammer">
<title>ansible-role-apache2</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="article">
<div id="header">
<h1>ansible-role-apache2</h1>
<div class="details">
<span id="author" class="author">Jonas Pammer</span><br>
<span id="email" class="email"><a href="mailto:opensource@jonaspammer.at">opensource@jonaspammer.at</a></span><br>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://galaxy.ansible.com/jonaspammer/apache2"><span class="image"><img src="https://img.shields.io/badge/available%20on%20ansible%20galaxy-jonaspammer.apache2-brightgreen" alt="Version on Galaxy"></span></a>
<a href="https://github.com/JonasPammer/ansible-role-apache2/actions/workflows/ci.yml"><span class="image"><img src="https://github.com/JonasPammer/ansible-role-apache2/actions/workflows/ci.yml/badge.svg" alt="Testing CI"></span></a></p>
</div>
<div class="paragraph">
<p>An Ansible role for installing Apache2, enabling/disabling modules, configuring its defaults and creating virtual hosts.</p>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#meta">ğŸ” Metadata</a></li>
<li><a href="#requirements">ğŸ“Œ Requirements</a></li>
<li><a href="#variables">ğŸ“œ Role Variables</a>
<ul class="sectlevel2">
<li><a href="#_role_variables_used_for_installation">Role Variables used for installation</a></li>
<li><a href="#_role_variables_used_to_create_virtual_hosts">Role Variables used to create Virtual Hosts</a></li>
</ul>
</li>
<li><a href="#public_vars">ğŸ“œ Facts/Variables defined by this role</a></li>
<li><a href="#tags">ğŸ·ï¸ Tags</a></li>
<li><a href="#dependencies">ğŸ‘« Dependencies</a></li>
<li><a href="#example_playbooks">ğŸ“š Example Playbook Usages</a></li>
<li><a href="#development">ğŸ“ Development</a>
<ul class="sectlevel2">
<li><a href="#development-system-dependencies">ğŸ“Œ Development Machine Dependencies</a></li>
<li><a href="#development-dependencies">ğŸ“Œ Development Dependencies</a></li>
<li><a href="#development-guidelines">â„¹ï¸ Ansible Role Development Guidelines</a></li>
<li><a href="#versioning">ğŸ”¢ Versioning</a></li>
<li><a href="#testing">ğŸ§ª Testing</a></li>
<li><a href="#development-container-extra">ğŸ§ƒ TIP: Containerized Ideal Development Environment</a></li>
<li><a href="#cookiecutter">ğŸª CookieCutter</a></li>
<li><a href="#pre-commit">â„¹ï¸ General Linting and Styling Conventions</a></li>
</ul>
</li>
<li><a href="#contributing">ğŸ’ª Contributing</a>
<ul class="sectlevel2">
<li><a href="#_preamble">ğŸ¤ Preamble</a></li>
<li><a href="#cookiecutter--contributing">ğŸª CookieCutter</a></li>
<li><a href="#_conventional_commits">ğŸ’¬ Conventional Commits</a></li>
<li><a href="#_getting_started">ğŸš€ Getting Started</a></li>
</ul>
</li>
<li><a href="#changelog">ğŸ—’ Changelog</a></li>
<li><a href="#license">âš–ï¸ License</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="meta">ğŸ” Metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below you can find information onâ€¦</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the role&#8217;s required Ansible version</p>
</li>
<li>
<p>the role&#8217;s supported platforms</p>
</li>
<li>
<p>the role&#8217;s <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html#role-dependencies">role dependencies</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><a href="meta/main.yml" class="bare">meta/main.yml</a></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="nn">---</span>
<span class="na">galaxy_info</span><span class="pi">:</span>
  <span class="na">role_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">apache2"</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">An</span><span class="nv"> </span><span class="s">ansible</span><span class="nv"> </span><span class="s">role</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">installing</span><span class="nv"> </span><span class="s">Apache2,</span><span class="nv"> </span><span class="s">enabling/disabling</span><span class="nv"> </span><span class="s">modules,</span><span class="nv"> </span><span class="s">configuring</span><span class="nv"> </span><span class="s">its</span><span class="nv"> </span><span class="s">defaults</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">creating</span><span class="nv"> </span><span class="s">virtual</span><span class="nv"> </span><span class="s">hosts."</span>

  <span class="na">author</span><span class="pi">:</span> <span class="s2">"</span><span class="s">jonaspammer"</span>
  <span class="na">license</span><span class="pi">:</span> <span class="s2">"</span><span class="s">MIT"</span>

  <span class="na">min_ansible_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2.11"</span>
  <span class="na">platforms</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">EL</span> <span class="c1"># (Enterprise Linux)</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">7"</span> <span class="c1"># actively tested: centos7</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">8"</span> <span class="c1"># actively tested: rockylinux8, centos8</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Fedora</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">35"</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Debian</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">buster</span> <span class="c1"># debian10 (actively tested)</span>
        <span class="pi">-</span> <span class="s">bullseye</span> <span class="c1"># debian11 (actively tested)</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Ubuntu</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">xenial</span> <span class="c1"># ubuntu1604 (actively tested)</span>
        <span class="pi">-</span> <span class="s">bionic</span> <span class="c1"># ubuntu1804 (actively tested)</span>
        <span class="pi">-</span> <span class="s">focal</span> <span class="c1"># ubuntu2004 (actively tested)</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Solaris</span>
      <span class="na">versions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">11.3"</span> <span class="c1"># warning: not actively tested</span>

  <span class="na">galaxy_tags</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">web</span>
    <span class="pi">-</span> <span class="s">apache</span>
    <span class="pi">-</span> <span class="s">webserver</span>
    <span class="pi">-</span> <span class="s">html</span>
    <span class="pi">-</span> <span class="s">httpd</span>

<span class="na">dependencies</span><span class="pi">:</span> <span class="pi">[]</span>

<span class="na">allow_duplicates</span><span class="pi">:</span> <span class="no">true</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirements">ğŸ“Œ Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Ansible User needs to be able to <code>become</code>.</p>
</div>
<div class="paragraph">
<p>If you are using SSL/TLS (<a href="#apache_vhosts_ssl">[apache_vhosts_ssl]</a>), you will need to provide your own certificate and key files.</p>
</div>
<div class="paragraph">
<p>If you are using Apache with PHP, I recommend using the
<a href="https://github.com/geerlingguy/ansible-role-php/">geerlingguy.php</a> role
to install PHP, and you can either use <code>mod_php</code>
(by adding the proper package, e.g. <code>libapache2-mod-php5</code> for Ubuntu, to <code>php_packages</code>),
or by also using
<a href="https://github.com/geerlingguy/ansible-role-apache-php-fpm"><code>geerlingguy.apache-php-fpm</code> </a>
to connect Apache to PHP via FPM.
Please consult the README&#8217;s of the linked roles for more specific information.</p>
</div>
<div class="paragraph">
<p>When targeting Solaris-based systems,
the <a href="https://galaxy.ansible.com/community/general"><code>community.general</code> collection</a>
(containing the <code>pkg5</code> module) must be installed on the Ansible controller.</p>
</div>
<div class="paragraph">
<p>When targeting Suse-based systems,
<a href="https://galaxy.ansible.com/community/general"><code>community.general</code> collection</a>
(containing the <code>zypper</code> module) must be installed on the Ansible controller.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="variables">ğŸ“œ Role Variables</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_mods_enabled</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">rewrite</span>
  <span class="pi">-</span> <span class="s">ssl</span>
<span class="na">apache_mods_disabled</span><span class="pi">:</span> <span class="pi">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>(Debian/RHEL only)
Apache mods to enable or disable (these will be symlinked into the appropriate location).
Consult the <code>mods-available</code> (Debian) / <code>conf.modules.d</code> (RHEL) directory inside <a href="#apache__server_root_dir">apache&#8217;s root directory</a> for all the available mods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_listen_ip</span><span class="pi">:</span> <span class="s2">"</span><span class="s">*"</span>
<span class="na">apache_listen_port</span><span class="pi">:</span> <span class="m">80</span>
<span class="na">apache_listen_port_ssl</span><span class="pi">:</span> <span class="s">443</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The IP address and ports on which apache should be listening.
Useful if you have another service (like a reverse proxy) listening
on port 80 or 443 and need to change the defaults.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_remove_default_vhost</span><span class="pi">:</span> <span class="no">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On Debian/Ubuntu, a default virtualhost is included in Apache&#8217;s configuration.
Set this to <code>true</code> to remove that default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_state</span><span class="pi">:</span> <span class="s">started</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Set initial apache state.
Recommended values: <code>started</code> or <code>stopped</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_enabled</span><span class="pi">:</span> <span class="no">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Set initial apache service status.
Recommended values: <code>true</code> or <code>false</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_restart_state</span><span class="pi">:</span> <span class="s">restarted</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets the state to put apache in when a configuration change was made
(i.e., when the <code>restart apache</code> handler has been called).
Recommended values: <code>restarted</code> or <code>reloaded</code></p>
</div>
<div id="apache_default_favicon" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_default_favicon</span><span class="pi">:</span> <span class="s">favicon.ico</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Path to a file on the local Ansible Controller to be copied to the server
and used by Apache as a default favicon.</p>
</div>
<div class="sect2">
<h3 id="_role_variables_used_for_installation">Role Variables used for installation</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_packages</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">OS-specific by default</span><span class="pi">,</span> <span class="nv">see /defaults directory</span><span class="pi">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A list of package names for installing Apache2 and most-necessary utilities.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_packages_state</span><span class="pi">:</span> <span class="s">present</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you have enabled any additional repositories such as
<a href="https://launchpad.net/~ondrej/+archive/ubuntu/apache2"><code>ondrej/apache2</code></a>,
<a href="https://fedoraproject.org/wiki/EPEL"><code>EPEL</code></a>, or
<a href="http://rpms.remirepo.net/"><code>remi</code></a>,
you may want an easy way to upgrade versions.
To ensure so, set this to <code>latest</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_enablerepo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>(RHEL/CentOS only)
The <a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/yum_module.html#parameter-enablerepo">repository</a>
to use when installing Apache.
If you&#8217;d like later versions of Apache than are available in the OS&#8217;s core repositories,
use a repository like
<a href="https://fedoraproject.org/wiki/EPEL">EPEL</a>
(which can be installed with the <code>repo-epel</code> role).</p>
</div>
</div>
<div class="sect2">
<h3 id="_role_variables_used_to_create_virtual_hosts">Role Variables used to create Virtual Hosts</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Head over to the <a href="#example_playbooks">ğŸ“š Example Playbook Usages</a>-Section for
examples showing how the produced VirtualHost-File may look like.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This role tries to ensure a <strong>working</strong> apache configuration by running
<a href="https://httpd.apache.org/docs/2.4/programs/httpd.html">syntax tests for all configuration files (<code>-t</code>)</a>
and reverting the generated virtualhost if an error occurred.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_create_vhosts</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">apache_vhosts_filename</span><span class="pi">:</span> <span class="s2">"</span><span class="s">vhosts.conf"</span>
<span class="na">apache_vhosts_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">vhosts.conf.j2"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If set to <code>true</code>, a vhosts file managed by the variables of this role (see below),
is created and placed in the Apache configuration folder.
If set to <code>false</code>, you can place your own vhosts file into Apache&#8217;s configuration folder and skip the convenient (but more basic) one added by this role.</p>
</div>
<div class="paragraph">
<p>You can also override the template used and set a path to your own template,
if you need to further customize the layout of your VirtualHost.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_global_vhost_settings</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">DirectoryIndex index.php index.html</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This variable gets used <strong><em>outside any &lt;VirtualHost&gt; Directive</em></strong>
in the generated virtualhost file.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>You hereby change the configurations applied to Apache&#8217;s general context
(instead of changing the configurations applied to, for example, a <code>&lt;VirtualHost&gt;</code>/ <code>&lt;Directory&gt;</code>/â€¦).</p>
</div>
<div class="paragraph">
<p>A thing to understand with this default value is that
<strong>the <code>DirectoryIndex</code> does not <em>set</em> but rather <em>append</em></strong>
(Meaning we do not reverse any other configuration made),
as noted on its Documentation page:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Multiple <code>DirectoryIndex</code> directives within the same context will add to
the list of resources to look for rather than replace.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; https://httpd.apache.org/docs/2.4/mod/mod_dir.html
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_vhosts</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">servername</span><span class="pi">:</span> <span class="s2">"</span><span class="s">local.dev"</span>
    <span class="na">documentroot</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/var/www/html"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For each entry in this list,
a <code>&lt;VirtualHost&gt;</code>-Directive listening to
<code>{{ apache_listen_ip }}:{{ apache_listen_port }}</code>
will be generated.</p>
</div>
<div class="paragraph">
<p>Each entry of a list may have the following properties
(Consult the <a href="#example_playbooks">ğŸ“š Example Playbook Usages</a>-Section for Examples.
Consult the linked official documentation pages for the documentation
of the actual Apache Directives they represent).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#servername">servername</a></code> (required)</dt>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#serveralias">serveralias</a></code></dt>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#serveradmin">serveradmin</a></code></dt>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#documentroot">documentroot</a></code></dt>
<dt class="hdlist1"><code>documentroot__<a href="https://httpd.apache.org/docs/2.4/mod/core.html#servername">allowoverride</a></code></dt>
<dd>
<p><code>AllowOverride</code>-Directive used inside the <code>&lt;Directory&gt;</code> of the <code>DocumentRoot</code>.<br>
Defaults to the value of <code>apache_vhosts_default_documentroot__allowoverride</code>.</p>
</dd>
<dt class="hdlist1"><code>documentroot__<a href="https://httpd.apache.org/docs/2.4/mod/core.html#options">options</a></code></dt>
<dd>
<p><code>Options</code>-Directive used inside the <code>&lt;Directory&gt;</code> of the <code>DocumentRoot</code>.<br>
Defaults to the value of <code>apache_vhosts_default_documentroot__options</code>.</p>
</dd>
<dt class="hdlist1"><a href="https://httpd.apache.org/docs/2.4/mod/mod_log_config.html#logformat"><code>logformat</code></a></dt>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#loglevel">loglevel</a></code></dt>
</dl>
</div>
<div id="apache_vhosts__errorlog" class="dlist">
<dl>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#errorlog">errorlog</a></code></dt>
<dd>
<p>Either a string  (representing the path. does not get automatically quoted)
or a complex data type:</p>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>path</code></dt>
<dd>
<p>Path.
Gets enquoted in <code>"</code>.</p>
</dd>
<dt class="hdlist1"><code>extra</code></dt>
<dd>
<p>Additional String to append after <code>path</code>.</p>
</dd>
<dt class="hdlist1"><code>extra_parameters</code></dt>
<dd>
<p>This variable gets inserted as-is <strong>before</strong> the actual <code>ErrorLog</code> statement
(with an indent of 2).</p>
<div class="paragraph">
<p>The use case for this parameter may be to enable Conditional Logs using
<code>SetEnvIf</code> / <code>SetEnv</code> or setting a custom <code>LogFormat</code> for this ErrorLog
<a href="https://httpd.apache.org/docs/2.4/logs.html">Apache&#8217;s core Documentation</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</dd>
</dl>
</div>
<div id="apache_vhosts__customlogs" class="dlist">
<dl>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/mod_log_config.html#customlog">customlogs</a></code></dt>
<dd>
<p>Array of CustomLogs.
Each Entry may either be a string (does not get automatically quoted)
or a complex data type:</p>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>path</code></dt>
<dd>
<p>Path.
Gets enquoted in <code>"</code>.</p>
</dd>
<dt class="hdlist1"><code>extra</code></dt>
<dd>
<p>Additional String to append after <code>path</code>.
Does not get quoted
(to allow for the complex additional optional parameters of CustomLog one may want to supply).</p>
</dd>
<dt class="hdlist1"><code>extra_parameters</code></dt>
<dd>
<p>This variable gets inserted as-is <strong>before</strong> the actual <code>CustomLog</code> statement
(with an indent of 2).</p>
<div class="paragraph">
<p>The use case for this parameter may be to enable Conditional Logs using
<code>SetEnvIf</code> / <code>SetEnv</code> or setting a custom <code>LogFormat</code> for this specifc CustomLog
as per <a href="https://httpd.apache.org/docs/2.4/logs.html">Apache&#8217;s mod_log_config Documentation</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>extra_parameters</code></dt>
<dd>
<p>This variable gets inserted as-is into the very end of the looped <code>&lt;VirtualHost&gt;</code> (with an indent of 2).</p>
</dd>
</dl>
</div>
<div id="apache_vhosts_ssl" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_vhosts_ssl</span><span class="pi">:</span> <span class="pi">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For each entry in this list,
a <code>&lt;VirtualHost&gt;</code>-Directive listening to
<code>{{ apache_listen_ip }}:{{ apache_listen_port_ssl }}</code>
will be generated.</p>
</div>
<div class="paragraph">
<p>Each entry of a list may have the following properties
(Consult the <a href="#example_playbooks">ğŸ“š Example Playbook Usages</a>-Section for Examples)
(Consult the linked official documentation pages for the documentation
of the actual Apache Directives they represent).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#servername">servername</a></code> (required)</dt>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#serveralias">serveralias</a></code></dt>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#serveradmin">serveradmin</a></code></dt>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#documentroot">documentroot</a></code></dt>
<dt class="hdlist1"><code>documentroot__<a href="https://httpd.apache.org/docs/2.4/mod/core.html#servername">allowoverride</a></code></dt>
<dd>
<p><code>AllowOverride</code>-Directive used inside the <code>&lt;Directory&gt;</code> of the <code>DocumentRoot</code>.<br>
Defaults to <code>apache_vhosts_default_documentroot__allowoverride</code>.</p>
</dd>
<dt class="hdlist1"><code>documentroot__<a href="https://httpd.apache.org/docs/2.4/mod/core.html#options">options</a></code></dt>
<dd>
<p><code>Options</code>-Directive used inside the <code>&lt;Directory&gt;</code> of the <code>DocumentRoot</code>.
Defaults to <code>apache_vhosts_default_documentroot__options</code>.</p>
</dd>
<dt class="hdlist1"><code>no_actual_ssl</code></dt>
<dd>
<p>If set to True, the <code>&lt;VirtualHost&gt;</code> will have no SSL* Options.
Used only when you want a http-to-https redirect you defined in <code>extra_parameters</code>.</p>
</dd>
<dt class="hdlist1"><a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcertificatefile">ssl_certificate_file</a> (required)</dt>
<dt class="hdlist1"><a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcertificatekeyfile">ssl_certificate_key_file</a> (required)</dt>
<dt class="hdlist1"><a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcertificatechainfile">ssl_certificate_chain_file</a></dt>
<dd>
<p><em>Please note that this Deprecated.</em></p>
</dd>
<dt class="hdlist1"><a href="https://httpd.apache.org/docs/2.4/mod/mod_log_config.html#logformat"><code>logformat</code></a></dt>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#loglevel">loglevel</a></code></dt>
</dl>
</div>
<div id="apache_vhosts__errorlog" class="dlist">
<dl>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/core.html#errorlog">errorlog</a></code></dt>
<dd>
<p>Equivalent of <a href="#apache_vhosts__errorlogs">apache_vhosts.errorlogs</a>.</p>
</dd>
<dt class="hdlist1"><code><a href="https://httpd.apache.org/docs/2.4/mod/mod_log_config.html#customlog">customlogs</a></code></dt>
<dd>
<p>Array of CustomLogs.
Equivalent of <a href="#apache_vhosts__customlogs">apache_vhosts.customlogs</a>.</p>
</dd>
<dt class="hdlist1"><code>extra_parameters</code></dt>
<dd>
<p>This variable gets inserted as-is into the very end of the looped <code>&lt;VirtualHost&gt;</code> (with an indent of 2).</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_ignore_missing_ssl_certificate</span><span class="pi">:</span> <span class="no">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If set to <code>false</code>, a given entry of <code>apache_vhosts_ssl</code>
will only be generated if its <code>sslcertificatefile</code> exists.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_ssl_protocol</span><span class="pi">:</span> <span class="s2">"</span><span class="s">All</span><span class="nv"> </span><span class="s">-SSLv2</span><span class="nv"> </span><span class="s">-SSLv3"</span>
<span class="na">apache_ssl_cipher_suite</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AES256+EECDH:AES256+EDH"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These variable are used as default for every <code>apache_vhosts_ssl</code>.
They are named the same way as used in said Role variables
(except for their prefix of course).
Consult <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html">
Apache&#8217;s Documentation</a>
for the documentation of the actual Apache Directives they represent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apache_vhosts_default_documentroot__allowoverride</span><span class="pi">:</span> <span class="s2">"</span><span class="s">All"</span>
<span class="na">apache_vhosts_default_documentroot__options</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-Indexes</span><span class="nv"> </span><span class="s">+FollowSymLinks"</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="public_vars">ğŸ“œ Facts/Variables defined by this role</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each variable listed in this section
is dynamically defined when executing this role (and can only be overwritten using <code>ansible.builtin.set_facts</code>) <em>and</em>
is meant to be used not just internally.</p>
</div>
<div id="apache__service" class="sidebarblock">
<div class="content">
<div class="title"><code>apache__service</code></div>
<div class="listingblock">
<div class="title">Example Usage outside this role:</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="c1"># handlers file for roles.xyz</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">restart apache2</span>
  <span class="na">ansible.builtin.service</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">apache__service</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default('apache2')</span><span class="nv"> </span><span class="s">}}"</span>
    <span class="na">state</span><span class="pi">:</span> <span class="s">restarted</span></code></pre>
</div>
</div>
</div>
</div>
<div id="apache__daemon" class="sidebarblock">
<div class="content">
<div class="title"><code>apache__daemon_dir</code>, <code>apache__daemon</code></div>
<div class="paragraph">
<p>Executable Name and Directory of the <code>apache2</code> command.</p>
</div>
</div>
</div>
<div id="apache__server_root_dir" class="sidebarblock">
<div class="content">
<div class="title"><code>apache__server_root_dir</code></div>
<div class="paragraph">
<p>Directory containing all Apache2 configuration (in <code>/etc</code>).</p>
</div>
</div>
</div>
<div id="debian_is_different_note" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>When working with any of the below configuration values you need to remember:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Apache 2 web server configuration in <strong>Debian is quite different to
upstream&#8217;s suggested way</strong> to configure the web server. This is because Debian&#8217;s
default Apache2 installation attempts to make adding and removing modules,
virtual hosts, and extra configuration directives as flexible as possible, in
order to make automating the changes and administering the server as easy as
possible.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Comment found in a Debian 10's /etc/apache2/apache2.conf
</div>
</div>
<div class="paragraph">
<p>This means that the <code>apache__server_root_dir</code>
<strong>on Debian</strong> looks like this:</p>
</div>
<div class="listingblock">
<div class="title"><code>tree /etc/apache2</code> of a fresh Debian 10 machine after apache2 install</div>
<div class="content">
<pre>.
â”œâ”€â”€ apache2.conf
â”œâ”€â”€ conf-available
â”‚Â Â  â”œâ”€â”€ charset.conf
â”‚Â Â  â”œâ”€â”€ localized-error-pages.conf
â”‚Â Â  â”œâ”€â”€ other-vhosts-access-log.conf
â”‚Â Â  â”œâ”€â”€ php7.4-fpm.conf
â”‚Â Â  â”œâ”€â”€ security.conf
â”‚Â Â  â””â”€â”€ serve-cgi-bin.conf
â”œâ”€â”€ conf-enabled
â”‚Â Â  â”œâ”€â”€ charset.conf -&gt; ../conf-available/charset.conf
â”‚Â Â  â””â”€â”€ â€¦
â”œâ”€â”€ envvars
â”œâ”€â”€ magic
â”œâ”€â”€ mods-available
â”‚Â Â  â”œâ”€â”€ access_compat.load
â”‚Â Â  â”œâ”€â”€ alias.load
â”‚Â Â  â”œâ”€â”€ alias.conf
â”‚Â Â  â””â”€â”€ â€¦
â”œâ”€â”€ mods-enabled
â”‚Â Â  â”œâ”€â”€ access_compat.load -&gt; ../mods-available/access_compat.load
â”‚Â Â  â”œâ”€â”€ alias.conf -&gt; ../mods-available/alias.conf
â”‚Â Â  â”œâ”€â”€ alias.load -&gt; ../mods-available/alias.load
â”‚Â Â  â””â”€â”€ â€¦
â”œâ”€â”€ ports.conf
â”œâ”€â”€ sites-available
â”‚Â Â  â”œâ”€â”€ 000-default.conf
â”‚Â Â  â””â”€â”€ default-ssl.conf
â””â”€â”€ sites-enabled
    â””â”€â”€ 000-default.conf -&gt; ../sites-available/000-default.conf</pre>
</div>
</div>
<div class="paragraph">
<p>While <mark>on other systems it looks like this</mark>:</p>
</div>
<div class="listingblock">
<div class="title"><code>tree /etc/apache2</code> of a fresh CentOS 8 machine after apache2 install</div>
<div class="content">
<pre>.
â”œâ”€â”€ conf
â”‚Â Â  â”œâ”€â”€ httpd.conf
â”‚Â Â  â””â”€â”€ magic
â”œâ”€â”€ conf.d
â”‚Â Â  â”œâ”€â”€ autoindex.conf
â”‚Â Â  â”œâ”€â”€ ssl.conf
â”‚Â Â  â”œâ”€â”€ userdir.conf
â”‚Â Â  â””â”€â”€ welcome.conf
â”œâ”€â”€ conf.modules.d
â”‚Â Â  â”œâ”€â”€ 00-base.conf
â”‚Â Â  â”œâ”€â”€ 00-dav.conf
â”‚Â Â  â”œâ”€â”€ 00-lua.conf
â”‚Â Â  â”œâ”€â”€ 00-mpm.conf
â”‚Â Â  â”œâ”€â”€ 00-optional.conf
â”‚Â Â  â”œâ”€â”€ 00-proxy.conf
â”‚Â Â  â”œâ”€â”€ 00-ssl.conf
â”‚Â Â  â”œâ”€â”€ 00-systemd.conf
â”‚Â Â  â”œâ”€â”€ 01-cgi.conf
â”‚Â Â  â”œâ”€â”€ 10-h2.conf
â”‚Â Â  â”œâ”€â”€ 10-proxy_h2.conf
â”‚Â Â  â””â”€â”€ README
â”œâ”€â”€ logs -&gt; ../../var/log/httpd
â”‚Â Â  â””â”€â”€ â€¦
â””â”€â”€ modules -&gt; ../../usr/lib64/httpd/modules
Â Â Â  â”œâ”€â”€ mod_access_compat.so
Â Â Â  â”œâ”€â”€ mod_actions.so
Â Â Â  â”œâ”€â”€ mod_alias.so
Â Â Â  â””â”€â”€ â€¦</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div id="apache__primary_configuration_file_path" class="sidebarblock">
<div class="content">
<div class="title"><code>apache__primary_configuration_file_path</code></div>
<div class="paragraph">
<p>Apache2&#8217;s primary configuration file,
which <a href="http://httpd.apache.org/docs/2.4/mod/core.html#include">
<code>Include</code></a>'s all the other files and contains some other Directives itself.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">Taking a look into how what is Include&#8217;ed</div>
<div class="paragraph">
<p>Debian&#8217;s Apache2 Include Directives as found in <code>apache__primary_configuration_file_path</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="c"># Include module configuration:
</span><span class="err">IncludeOptional</span> <span class="err">mods-enabled/*.load</span>
<span class="err">IncludeOptional</span> <span class="err">mods-enabled/*.conf</span>

<span class="c"># Include list of ports to listen on
</span><span class="err">Include</span> <span class="err">ports.conf</span>

<span class="c"># Include of directories ignores editors' and dpkg's backup files,
# Include generic snippets of statements
</span>
<span class="err">IncludeOptional</span> <span class="err">conf-enabled/*.conf</span>
<span class="c"># Include the virtual host configurations:
</span><span class="err">IncludeOptional</span> <span class="err">sites-enabled/*.conf</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>RHEL&#8217;s Apache2 Include Directives as found in <code>apache__primary_configuration_file_path</code> on a CentOS 8 Machine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="c"># Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding `LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by `httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
</span><span class="err">Include</span> <span class="err">conf.modules.d/*.conf</span>

<span class="c"># Supplemental configuration:
</span><span class="err">IncludeOptional</span> <span class="err">conf.d/*.conf</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div id="apache__ports_configuration_file" class="sidebarblock">
<div class="content">
<div class="title"><code>apache__ports_configuration_file</code></div>
<div class="paragraph">
<p>Apache2 Configuration File that houses the directives used
to determine listening ports for incoming connections.</p>
</div>
<div class="paragraph">
<p>On some systems this is the same as <code>apache<em>primary_configuration_file_path</code>,
but on some it is an own file which is being
<a href="http://httpd.apache.org/docs/2.4/mod/core.html#include">
<code>Include</code></a>-ed by said <code>apache</em>primary_configuration_file_path</code>.</p>
</div>
</div>
</div>
<div id="apache__server_conf_dir" class="sidebarblock">
<div class="content">
<div class="title"><code>apache__server_conf_dir</code></div>
<div class="paragraph">
<p>Directory which houses all <a href="http://httpd.apache.org/docs/2.4/mod/core.html#include">
<code>Include</code></a>-ed files.</p>
</div>
<div class="paragraph">
<p>This directory may not be <code>Include</code>-ed itself but have sub-directories that are being <code>Include</code>-ed.
Consult the NOTE/TIP found in <a href="#apache__primary_configuration_file_path"><code>apache__primary_configuration_file_path</code></a>
to know what Directories are being <code>Include</code>-ed by default on different OS&#8217;es.</p>
</div>
</div>
</div>
<div id="apache__default_log_dir" class="sidebarblock">
<div class="content">
<div class="title"><code>apache__default_log_dir</code></div>
<div class="paragraph">
<p>Directory in <code>/var</code> used by default for all virtual hosts.</p>
</div>
<div class="paragraph">
<p>The below output shows the typical default file contents
of this folder for the major distros:</p>
</div>
<div class="listingblock">
<div class="title">RedHat</div>
<div class="content">
<pre>[root@instance-py3-ansible-5 /]# ls -l /var/log/httpd/
total 8
-rw-r--r-- 1 root root   0 Jun 11 11:16 access_log
-rw-r--r-- 1 root root 980 Jun 11 11:16 error_log
-rw-r--r-- 1 root root   0 Jun 11 11:16 ssl_access_log
-rw-r--r-- 1 root root 328 Jun 11 11:16 ssl_error_log
-rw-r--r-- 1 root root   0 Jun 11 11:16 ssl_request_log</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Debian</div>
<div class="content">
<pre>root@instance-py3-ansible-5-debian10:/# ls -l /var/log/apache2
total 4
-rw-r----- 1 root adm     0 Aug 29 10:17 access.log
-rw-r----- 1 root adm  2133 Aug 29 10:18 error.log
-rw-r--r-- 1 root root    0 Aug 29 10:18 local2-error.log
-rw-r----- 1 root adm     0 Aug 29 10:17 other_vhosts_access.log</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tags">ğŸ·ï¸ Tags</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tasks are tagged with the following
<a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_tags.html#adding-tags-to-roles">tags</a>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">This role does not have officially documented tags yet.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can use Ansible to skip tasks, or only run certain tasks by using these tags. By default, all tasks are run when no tags are specified.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dependencies">ğŸ‘« Dependencies</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="example_playbooks">ğŸ“š Example Playbook Usages</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This role is part of <a href="https://github.com/JonasPammer/ansible-roles">
many compatible purpose-specific roles of mine</a>.</p>
</div>
<div class="paragraph">
<p>The machine needs to be prepared.
In CI, this is done in <code>molecule/resources/prepare.yml</code>
which sources its soft dependencies from <code>requirements.yml</code>:</p>
</div>
<div class="listingblock">
<div class="title"><a href="molecule/resources/prepare.yml" class="bare">molecule/resources/prepare.yml</a></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">prepare</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">all</span>
  <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">gather_facts</span><span class="pi">:</span> <span class="no">false</span>

  <span class="na">roles</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">jonaspammer.bootstrap</span>
    <span class="c1">#    - role: jonaspammer.core_dependencies</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following diagram is a compilation of the "soft dependencies" of this role
as well as the recursive tree of their soft dependencies.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://raw.githubusercontent.com/JonasPammer/ansible-roles/master/graphs/dependencies_apache2.svg" alt="requirements.yml dependency graph of jonaspammer.apache2"></span></p>
</div>
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 1. Standard Installation (no variables)</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The following yaml:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">roles</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">jonaspammer.apache2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>generates the following VirtualHost:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code># Ansible managed
DirectoryIndex index.php index.html
&lt;VirtualHost *:80&gt;
    ServerName local.dev
    DocumentRoot "/var/www/html"

    &lt;Directory "/var/www/html"&gt;
        AllowOverride All
        Options -Indexes +FollowSymLinks
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Reference, this is the default vhost shipped with Debian/Ubuntu systems
(which can be removed by setting <code>apache_remove_default_vhost</code> to true)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>&lt;VirtualHost *:80&gt;
        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/html

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given no role configuration, the deviance&#8217;s from just installing Apache2 yourself are</p>
</div>
<div class="ulist">
<ul>
<li>
<p>certain modules get activated by default (<code><a href="#apache_mods_enabled">[apache_mods_enabled]</a></code>).</p>
</li>
<li>
<p>the system will have the above demonstrated VirtualHost</p>
</li>
<li>
<p>On initial install, a file with the name of <code>favicon.ico</code> (sourced from <a href="#apache_default_favicon">[apache_default_favicon]</a>) will be placed into <code>/var/www/html</code>
if there was no file with said name before. This favicon, by default, resembles the Ansible logo as found on Wikimedia.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Please note that this role does <strong>not</strong> delete the contents of <code>/var/www/html</code>
(not even if it got created by/after apache2 initial install).</em></p>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. Logging</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The following yaml:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">roles</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">jonaspammer.apache2</span>

<span class="na">vars</span><span class="pi">:</span>
  <span class="na">apache_vhost_filename</span><span class="pi">:</span> <span class="s2">"</span><span class="s">local2.dev.conf"</span>
  <span class="na">apache_vhosts</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">servername</span><span class="pi">:</span> <span class="s2">"</span><span class="s">wwww.local2.dev"</span>
      <span class="na">loglevel</span><span class="pi">:</span> <span class="s">info</span>
      <span class="na">errorlog</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">apache__default_log_dir</span><span class="nv"> </span><span class="s">}}/local2-error.log"</span>
      <span class="na">customlog</span><span class="pi">:</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">apache__default_log_dir</span><span class="nv"> </span><span class="s">}}/local2-access.log"</span>
        <span class="na">extra</span><span class="pi">:</span> <span class="s2">"</span><span class="s">combined"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>generates the following VirtualHost:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code># Ansible managed.

TODO</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 3. Usage of <code>extra_parameters</code></div>
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The pipe symbol at the end of a line in YAML signifies that any indented text that follows
should be interpreted as a multi-line scalar value.
See <a href="https://yaml-multiline.info/">yaml-multiline.info</a> for interactive explanation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>The following yaml:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">roles</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">jonaspammer.apache2</span>

<span class="na">vars</span><span class="pi">:</span>
  <span class="na">apache_vhost_filename</span><span class="pi">:</span> <span class="s2">"</span><span class="s">myvhost.conf"</span>
  <span class="na">apache_vhosts</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">servername</span><span class="pi">:</span> <span class="s2">"</span><span class="s">www.local.dev"</span>
      <span class="na">serveralias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">local.dev"</span>
      <span class="na">documentroot</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/var/www/html"</span>
      <span class="na">extra_parameters</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># Redirect all requests to 'www' subdomain. Apache 2.4+</span>
          <span class="s">RewriteEngine On</span>
          <span class="s">RewriteCond %{HTTP_HOST} !^www\. [NC]</span>
          <span class="s">RewriteRule ^(.*)$ %{REQUEST_SCHEME}://www.%{HTTP_HOST}%{REQUEST_URI} [R=302,L]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>generates the following VirtualHost:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code># Ansible managed.

TODO</code></pre>
</div>
</div>
</li>
<li>
<p>The following yaml:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">roles</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">jonaspammer.apache2</span>

<span class="na">vars</span><span class="pi">:</span>
  <span class="na">apache_vhost_filename</span><span class="pi">:</span> <span class="s2">"</span><span class="s">myvhost.conf"</span>
  <span class="na">apache_vhosts</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">servername</span><span class="pi">:</span> <span class="s2">"</span><span class="s">srvcmk.intra.jonaspammer.com"</span>
      <span class="na">extra_parameters</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="s">Redirect / {{ checkmk_site_url }}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>generates the following VirtualHost:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code># Ansible managed.
DirectoryIndex index.php index.html
&lt;VirtualHost *:80&gt;
    ServerName srvcmk.intra.jonaspammer.com

    Redirect / http://srvcmk.intra.jonaspammer.at/master
&lt;/VirtualHost&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 4. Creating your own virtualhost file / Integrate into a role</div>
<div class="content">
<div class="paragraph">
<p><em>The apache2 role may be executed multiple times in a play, with the primary purpose of
<a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html#using-allow-duplicates-true">this allowance</a>
being to be able to create virtualhosts.</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="pi">-</span> <span class="na">tasks</span><span class="pi">:</span>
    <span class="s">#...</span>
    <span class="s">- name</span><span class="err">:</span> <span class="s">Generate Apache2 VirtualHost.</span>
      <span class="s">ansible.builtin.<mark>include_role</mark></span><span class="err">:</span> <span class="s2">"</span><span class="s">apache2"</span>
      <span class="na">vars</span><span class="pi">:</span>
        <span class="c1"><mark>apache_vhost_filename: "myapp.conf"</mark></span>
        <span class="na">apache_vhosts</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">servername</span><span class="pi">:</span> <span class="s2">"</span><span class="s">www.myapp.dev"</span>
            <span class="na">serveralias</span><span class="pi">:</span> <span class="s2">"</span><span class="s">myapp.dev"</span>
            <span class="na">DocumentRoot</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/opt/myapp"</span>
  <span class="err">  </span><span class="s">#...</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="development">ğŸ“ Development</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://conventionalcommits.org"><span class="image"><img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg" alt="Conventional Commits"></span></a>
<a href="https://results.pre-commit.ci/latest/github/JonasPammer/ansible-role-apache2/master"><span class="image"><img src="https://results.pre-commit.ci/badge/github/JonasPammer/ansible-role-apache2/master.svg" alt="pre-commit.ci status"></span></a></p>
</div>
<div class="sect2">
<h3 id="development-system-dependencies">ğŸ“Œ Development Machine Dependencies</h3>
<div class="ulist">
<ul>
<li>
<p>Python 3.8 or greater</p>
</li>
<li>
<p>Docker</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="development-dependencies">ğŸ“Œ Development Dependencies</h3>
<div class="paragraph">
<p>Development Dependencies are defined in a
<a href="https://pip.pypa.io/en/stable/user_guide/#requirements-files">pip requirements file</a>
named <code>requirements-dev.txt</code>.
Example Installation Instructions for Linux are shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># "optional": create a python virtualenv and activate it for the current shell session
$ python3 -m venv venv
$ source venv/bin/activate

$ python3 -m pip install -r requirements-dev.txt</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="development-guidelines">â„¹ï¸ Ansible Role Development Guidelines</h3>
<div class="paragraph">
<p>Please take a look at my <a href="https://github.com/JonasPammer/cookiecutter-ansible-role/blob/master/ROLE_DEVELOPMENT_GUIDELINES.adoc">
Ansible Role Development Guidelines</a>.</p>
</div>
<div class="paragraph">
<p>If interested, I&#8217;ve also written down some
<a href="https://github.com/JonasPammer/cookiecutter-ansible-role/blob/master/ROLE_DEVELOPMENT_TIPS.adoc">
General Ansible Role Development (Best) Practices</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="versioning">ğŸ”¢ Versioning</h3>
<div class="paragraph">
<p>Versions are defined using <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">Tags</a>,
which in turn are <a href="https://galaxy.ansible.com/docs/contributing/version.html">recognized and used</a> by Ansible Galaxy.</p>
</div>
<div class="paragraph">
<p><strong>Versions must not start with <code>v</code>.</strong></p>
</div>
<div class="paragraph">
<p>When a new tag is pushed, <a href="https://github.com/JonasPammer/ansible-role-apache2/actions/workflows/release-to-galaxy.yml">
a GitHub CI workflow</a>
(<span class="image"><img src="https://github.com/JonasPammer/ansible-role-apache2/actions/workflows/release-to-galaxy.yml/badge.svg" alt="Release CI"></span>)
takes care of importing the role to my Ansible Galaxy Account.</p>
</div>
</div>
<div class="sect2">
<h3 id="testing">ğŸ§ª Testing</h3>
<div class="paragraph">
<p>Automatic Tests are run on each Contribution using GitHub Workflows.</p>
</div>
<div class="paragraph">
<p>The Tests primarily resolve around running
<a href="https://molecule.readthedocs.io/en/latest/">Molecule</a>
on a varying set of linux distributions and using various ansible versions,
as detailed in <a href="https://github.com/JonasPammer/ansible-roles">JonasPammer/ansible-roles</a>.</p>
</div>
<div class="paragraph">
<p>The molecule test also includes a step which lints all ansible playbooks using
<a href="https://github.com/ansible/ansible-lint#readme"><code>ansible-lint</code></a>
to check for best practices and behaviour that could potentially be improved.</p>
</div>
<div class="paragraph">
<p>To run the tests, simply run <code>tox</code> on the command line.
You can pass an optional environment variable to define the distribution of the
Docker container that will be spun up by molecule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ MOLECULE_DISTRO=centos7 tox</pre>
</div>
</div>
<div class="paragraph">
<p>For a list of possible values fed to <code>MOLECULE_DISTRO</code>,
take a look at the matrix defined in <a href=".github/workflows/ci.yml" class="bare">.github/workflows/ci.yml</a>.</p>
</div>
<div class="sect3">
<h4 id="_debugging_a_molecule_container">ğŸ› Debugging a Molecule Container</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run your molecule tests with the option <code>MOLECULE_DESTROY=never</code>, e.g.:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>MOLECULE_DESTROY=never MOLECULE_DISTRO=<mark>ubuntu1604</mark> tox -e py3-ansible-<mark>5</mark></strong>
...
  TASK [ansible-role-pip : (redacted).] ************************
  failed: [instance-py3-ansible-5] => changed=false
...
 ___________________________________ summary ____________________________________
  pre-commit: commands succeeded
ERROR:   py3-ansible-5: commands failed</pre>
</div>
</div>
</li>
<li>
<p>Find out the name of the molecule-provisioned docker container:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>docker ps</strong>
<mark>30e9b8d59cdf</mark>   geerlingguy/docker-debian10-ansible:latest   "/lib/systemd/systemd"   8 minutes ago   Up 8 minutes                                                                                                    instance-py3-ansible-5</pre>
</div>
</div>
</li>
<li>
<p>Get into a bash Shell of the container, and do your debugging:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>docker exec -it <mark>30e9b8d59cdf</mark> /bin/bash</strong>

root@instance-py3-ansible-2:/#
root@instance-py3-ansible-2:/# python3 --version
Python 3.8.10
root@instance-py3-ansible-2:/# ...</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the failure you try to debug is part of <code>verify.yml</code> step and not the actual <code>converge.yml</code>,
you may want to know that the output of ansible&#8217;s modules (<code>vars</code>), hosts (<code>hostvars</code>) and environment variables have been stored into files
on both the provisioner and inside the docker machine under:
* <code>/var/tmp/vars.yml</code>
* <code>/var/tmp/hostvars.yml</code>
* <code>/var/tmp/environment.yml</code>
<code>grep</code>, <code>cat</code> or transfer these as you wish!</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>You may also want to know that the files mentioned in the admonition above
are attached to the <strong>GitHub CI Artifacts</strong> of a given Workflow run.<br>
This allows one to check the difference between runs
and thus help in debugging what caused the bit-rot or failure in general.
image::https://user-images.githubusercontent.com/32995541/178442403-e15264ca-433a-4bc7-95db-cfadb573db3c.png[]</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>After you finished your debugging, exit it and destroy the container:</p>
<div class="listingblock">
<div class="content">
<pre>root@instance-py3-ansible-2:/# <strong>exit</strong>

$ <strong>docker stop <mark>30e9b8d59cdf</mark></strong>

$ <strong>docker container rm <mark>30e9b8d59cdf</mark></strong>
<em>or</em>
$ <strong>docker container prune</strong></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="development-container-extra">ğŸ§ƒ TIP: Containerized Ideal Development Environment</h3>
<div class="paragraph">
<p>This Project offers a definition for a "1-Click Containerized Development Environment".</p>
</div>
<div class="paragraph">
<p>This Container even allow one to run docker containers inside of them (Docker-In-Docker, dind),
allowing for molecule execution.</p>
</div>
<div class="paragraph">
<p>To use it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you fullfill the <a href="https://code.visualstudio.com/docs/remote/containers#_system-requirements">
the System requirements of Visual Studio Code Development Containers</a>,
optionally following the <em>Installation</em>-Section of the linked page section.<br>
This includes: Installing Docker, Installing Visual Studio Code itself, and Installing the necessary Extension.</p>
</li>
<li>
<p>Clone the project to your machine</p>
</li>
<li>
<p>Open the folder of the repo in Visual Studio Code (<em>File - Open Folderâ€¦</em>).</p>
</li>
<li>
<p>If you get a prompt at the lower right corner informing you about the presence of the devcontainer definition,
you can press the accompanying button to enter it.
<strong>Otherwise,</strong> you can also execute the Visual Studio Command <code>Remote-Containers: Open Folder in Container</code> yourself (<em>View - Command Palette</em> &#8594; <em>type in the mentioned command</em>).</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>I recommend using <code>Remote-Containers: Rebuild Without Cache and Reopen in Container</code>
once here and there as the devcontainer feature does have some problems recognizing
changes made to its definition properly some times.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You may need to configure your host system to enable the container to use your SSH Keys.</p>
</div>
<div class="paragraph">
<p>The procedure is described <a href="https://code.visualstudio.com/docs/remote/containers#_sharing-git-credentials-with-your-container">
in the official devcontainer docs under "Sharing Git credentials with your container"</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="cookiecutter">ğŸª CookieCutter</h3>
<div class="paragraph">
<p>This Project shall be kept in sync with
<a href="https://github.com/JonasPammer/cookiecutter-ansible-role">the CookieCutter it was originally templated from</a>
using <a href="https://github.com/cruft/cruft">cruft</a> (if possible) or manual alteration (if needed)
to the best extend possible.</p>
</div>
<div class="quoteblock">
<div class="title">Official Example Usage of <code>cruft update</code></div>
<blockquote>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/cruft/cruft/master/art/example_update.gif" alt="Official Example Usage of `cruft update`">
</div>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="_changelog">ğŸ•— Changelog</h4>
<div class="paragraph">
<p>When a new tag is pushed, an appropriate GitHub Release will be created
by the Repository Maintainer to provide a proper human change log with a title and description.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pre-commit">â„¹ï¸ General Linting and Styling Conventions</h3>
<div class="paragraph">
<p>General Linting and Styling Conventions are
<a href="https://stackoverflow.blog/2020/07/20/linters-arent-in-your-way-theyre-on-your-side/"><strong>automatically</strong> held up to Standards</a>
by various <a href="https://pre-commit.com/"><code>pre-commit</code></a> hooks, at least to some extend.</p>
</div>
<div class="paragraph">
<p>Automatic Execution of pre-commit is done on each Contribution using
<a href="https://pre-commit.ci/"><code>pre-commit.ci</code></a><a href="#note_pre-commit-ci">*</a>.
Pull Requests even automatically get fixed by the same tool,
at least by hooks that automatically alter files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Not to confuse:
Although some pre-commit hooks may be able to warn you about script-analyzed flaws in syntax or even code to some extend (for which reason pre-commit&#8217;s hooks are <strong>part of</strong> the test suite),
pre-commit itself does not run any real Test Suites.
For Information on Testing, see <a href="#testing">ğŸ§ª Testing</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div id="note_pre-commit-ci" class="paragraph">
<p>Nevertheless, I recommend you to integrate pre-commit into your local development workflow yourself.</p>
</div>
<div class="paragraph">
<p>This can be done by cd&#8217;ing into the directory of your cloned project and running <code>pre-commit install</code>.
Doing so will make git run pre-commit checks on every commit you make,
aborting the commit themselves if a hook alarm&#8217;ed.</p>
</div>
<div class="paragraph">
<p>You can also, for example, execute pre-commit&#8217;s hooks at any time by running <code>pre-commit run --all-files</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributing">ğŸ’ª Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square" alt="PRs Welcome"></span>
<a href="https://open.vscode.dev/JonasPammer/ansible-role-apache2"><span class="image"><img src="https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual%20Studio%20Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc" alt="Open in Visual Studio Code"></span></a></p>
</div>
<div class="paragraph">
<p>The following sections are generic in nature and are used to help new contributors.
The actual "Development Documentation" of this project is found under <a href="#development">ğŸ“ Development</a>.</p>
</div>
<div class="sect2">
<h3 id="_preamble">ğŸ¤ Preamble</h3>
<div class="paragraph">
<p>First off, thank you for considering contributing to this Project.</p>
</div>
<div class="paragraph">
<p>Following these guidelines helps to communicate that you respect the time of the developers managing and developing this open source project.
In return, they should reciprocate that respect in addressing your issue, assessing changes, and helping you finalize your pull requests.</p>
</div>
</div>
<div class="sect2">
<h3 id="cookiecutter--contributing">ğŸª CookieCutter</h3>
<div class="paragraph">
<p>This Project owns many of its files to
<a href="https://github.com/JonasPammer/cookiecutter-ansible-role">the CookieCutter it was originally templated from</a>.</p>
</div>
<div class="paragraph">
<p>Please check if the edit you have in mind is actually applicable to the template
and if so make an appropriate change there instead.
Your change may also be applicable partly to the template
as well as partly to something specific to this project,
in which case you would be creating multiple PRs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conventional_commits">ğŸ’¬ Conventional Commits</h3>
<div class="paragraph">
<p>A casual contributor does not have to worry about following
<a href="https://github.com/JonasPammer/JonasPammer/blob/master/demystifying/conventional_commits.adoc"><em>the spec</em></a>
<a href="https://www.conventionalcommits.org/en/v1.0.0/"><em>by definition</em></a>,
as pull requests are being squash merged into one commit in the project.
Only core contributors, i.e. those with rights to push to this project&#8217;s branches, must follow it
(e.g. to allow for automatic version determination and changelog generation to work).</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started">ğŸš€ Getting Started</h3>
<div class="paragraph">
<p>Contributions are made to this repo via Issues and Pull Requests (PRs).
A few general guidelines that cover both:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Search for existing Issues and PRs before creating your own.</p>
</li>
<li>
<p>If you&#8217;ve never contributed before, see <a href="https://auth0.com/blog/a-first-timers-guide-to-an-open-source-project/">
the first timer&#8217;s guide on Auth0&#8217;s blog</a> for resources and tips on how to get started.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_issues">Issues</h4>
<div class="paragraph">
<p>Issues should be used to report problems, request a new feature, or to discuss potential changes <strong>before</strong> a PR is created.
When you <a href="https://github.com/JonasPammer/ansible-role-apache2/issues/new">
create a new Issue</a>, a template will be loaded that will guide you through collecting and providing the information we need to investigate.</p>
</div>
<div class="paragraph">
<p>If you find an Issue that addresses the problem you&#8217;re having,
please add your own reproduction information to the existing issue <strong>rather than creating a new one</strong>.
Adding a <a href="https://github.blog/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/">reaction</a>
can also help be indicating to our maintainers that a particular problem is affecting more than just the reporter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pull_requests">Pull Requests</h4>
<div class="paragraph">
<p>PRs to this Project are always welcome and can be a quick way to get your fix or improvement slated for the next release.
<a href="https://blog.ploeh.dk/2015/01/15/10-tips-for-better-pull-requests/">In general</a>, PRs should:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only fix/add the functionality in question <strong>OR</strong> address wide-spread whitespace/style issues, not both.</p>
</li>
<li>
<p>Add unit or integration tests for fixed or changed functionality (if a test suite already exists).</p>
</li>
<li>
<p><strong>Address a single concern</strong></p>
</li>
<li>
<p><strong>Include documentation</strong> in the repo</p>
</li>
<li>
<p>Be accompanied by a complete Pull Request template (loaded automatically when a PR is created).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For changes that address core functionality or would require breaking changes (e.g. a major release),
it&#8217;s best to open an Issue to discuss your proposal first.</p>
</div>
<div class="paragraph">
<p>In general, we follow the "fork-and-pull" Git workflow</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fork the repository to your own Github account</p>
</li>
<li>
<p>Clone the project to your machine</p>
</li>
<li>
<p>Create a branch locally with a succinct but descriptive name</p>
</li>
<li>
<p>Commit changes to the branch</p>
</li>
<li>
<p>Following any formatting and testing guidelines specific to this repo</p>
</li>
<li>
<p>Push changes to your fork</p>
</li>
<li>
<p>Open a PR in our repository and follow the PR template so that we can efficiently review the changes.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changelog">ğŸ—’ Changelog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please refer to the
<a href="https://github.com/JonasPammer/ansible-role-apache2/releases">Release Page of this Repository</a>
for a human changelog of the corresponding
<a href="https://github.com/JonasPammer/ansible-role-apache2/tags">Tags (Versions) of this Project</a>.</p>
</div>
<div class="paragraph">
<p>Note that this Project adheres to Semantic Versioning.
Please report any accidental breaking changes of a minor version update.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="license">âš–ï¸ License</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title"><a href="LICENSE" class="bare">LICENSE</a></div>
<div class="content">
<pre>MIT License

Copyright (c) 2022, Jonas Pammer

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-08-29 10:25:57 UTC
</div>
</div>
</body>
</html>